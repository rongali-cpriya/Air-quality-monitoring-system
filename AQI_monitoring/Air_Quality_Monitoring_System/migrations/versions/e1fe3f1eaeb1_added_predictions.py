"""added predictions

Revision ID: e1fe3f1eaeb1
Revises: 767d8735b35a
Create Date: 2025-04-05 00:51:23.052548

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = 'e1fe3f1eaeb1'
down_revision: Union[str, None] = '767d8735b35a'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('predictions', sa.Column('pm25_predicted', sa.DECIMAL(precision=10, scale=4), nullable=True))
    op.add_column('predictions', sa.Column('pm10_predicted', sa.DECIMAL(precision=10, scale=4), nullable=True))
    op.add_column('predictions', sa.Column('no2_predicted', sa.DECIMAL(precision=10, scale=4), nullable=True))
    op.add_column('predictions', sa.Column('co_predicted', sa.DECIMAL(precision=10, scale=4), nullable=True))
    op.add_column('predictions', sa.Column('so2_predicted', sa.DECIMAL(precision=10, scale=4), nullable=True))
    op.add_column('predictions', sa.Column('ozone_predicted', sa.DECIMAL(precision=10, scale=4), nullable=True))
    op.add_column('predictions', sa.Column('aqi_predicted', sa.Integer(), nullable=True))
    op.add_column('predictions', sa.Column('nearby_station', sa.String(), nullable=True))
    op.alter_column('predictions', 'prediction_time',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.drop_constraint('predictions_station_id_fkey', 'predictions', type_='foreignkey')
    op.drop_column('predictions', 'predicted_value')
    op.drop_column('predictions', 'predicted_aqi')
    op.drop_column('predictions', 'confidence')
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('predictions', sa.Column('confidence', sa.NUMERIC(precision=5, scale=4), autoincrement=False, nullable=True))
    op.add_column('predictions', sa.Column('predicted_aqi', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('predictions', sa.Column('predicted_value', sa.NUMERIC(precision=10, scale=4), autoincrement=False, nullable=False))
    op.create_foreign_key('predictions_station_id_fkey', 'predictions', 'stations', ['station_id'], ['station_id'])
    op.alter_column('predictions', 'prediction_time',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.drop_column('predictions', 'nearby_station')
    op.drop_column('predictions', 'aqi_predicted')
    op.drop_column('predictions', 'ozone_predicted')
    op.drop_column('predictions', 'so2_predicted')
    op.drop_column('predictions', 'co_predicted')
    op.drop_column('predictions', 'no2_predicted')
    op.drop_column('predictions', 'pm10_predicted')
    op.drop_column('predictions', 'pm25_predicted')
    # ### end Alembic commands ###
